{"id":"KXqS","dependencies":[{"name":"/Users/preigile/Repos/shri/very-smart-house/package.json","includedInParent":true,"mtime":1538680745879},{"name":"/Users/preigile/Repos/shri/very-smart-house/.babelrc","includedInParent":true,"mtime":1538680745876}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=function(){var t=document.getElementById(\"camera\"),e=null,s={scale:1,translate:0,brightness:100,startPosition:0};t.addEventListener(\"pointerdown\",function(r){t.setPointerCapture(r.pointerId),e={startX:r.x,prevX:r.x,prevTs:Date.now(),scale:s.scale,translate:s.translate,brightness:s.brightness,startPosition:s.startPosition}}),t.addEventListener(\"pointermove\",function(r){if(e){var a=e,n=a.startX,i=(a.prevX,a.prevTs,a.scale,a.translate),o=(a.brightness,a.startPosition,r.x),l=o-n;t.style.transform=\"translate(\"+(i+l)+\"px)\",e.prevX=o,s.translate=l<-1.5*s.translate?-2*s.translate:0}})};","map":{"mappings":[{"source":"app/scripts/pointer-events.js","original":{"line":53,"column":1},"generated":{"line":1,"column":0}},{"source":"app/scripts/pointer-events.js","original":{"line":53,"column":1},"generated":{"line":1,"column":13}},{"source":"app/scripts/pointer-events.js","original":{"line":53,"column":1},"generated":{"line":1,"column":20}},{"source":"app/scripts/pointer-events.js","original":{"line":53,"column":1},"generated":{"line":1,"column":35}},{"source":"app/scripts/pointer-events.js","original":{"line":53,"column":1},"generated":{"line":1,"column":43}},{"source":"app/scripts/pointer-events.js","original":{"line":53,"column":1},"generated":{"line":1,"column":56}},{"source":"app/scripts/pointer-events.js","original":{"line":53,"column":1},"generated":{"line":1,"column":57}},{"source":"app/scripts/pointer-events.js","original":{"line":53,"column":1},"generated":{"line":1,"column":64}},{"source":"app/scripts/pointer-events.js","original":{"line":1,"column":15},"generated":{"line":1,"column":68}},{"source":"app/scripts/pointer-events.js","original":{"line":1,"column":15},"generated":{"line":1,"column":76}},{"source":"app/scripts/pointer-events.js","original":{"line":1,"column":15},"generated":{"line":1,"column":84}},{"source":"app/scripts/pointer-events.js","name":"camera","original":{"line":2,"column":8},"generated":{"line":1,"column":95}},{"source":"app/scripts/pointer-events.js","name":"camera","original":{"line":2,"column":8},"generated":{"line":1,"column":99}},{"source":"app/scripts/pointer-events.js","name":"document","original":{"line":2,"column":17},"generated":{"line":1,"column":101}},{"source":"app/scripts/pointer-events.js","name":"getElementById","original":{"line":2,"column":26},"generated":{"line":1,"column":110}},{"source":"app/scripts/pointer-events.js","original":{"line":2,"column":41},"generated":{"line":1,"column":125}},{"source":"app/scripts/pointer-events.js","name":"currentGesture","original":{"line":3,"column":8},"generated":{"line":1,"column":135}},{"source":"app/scripts/pointer-events.js","original":{"line":3,"column":25},"generated":{"line":1,"column":137}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":5,"column":10},"generated":{"line":1,"column":142}},{"source":"app/scripts/pointer-events.js","original":{"line":5,"column":22},"generated":{"line":1,"column":144}},{"source":"app/scripts/pointer-events.js","original":{"line":6,"column":15},"generated":{"line":1,"column":145}},{"source":"app/scripts/pointer-events.js","original":{"line":6,"column":15},"generated":{"line":1,"column":151}},{"source":"app/scripts/pointer-events.js","original":{"line":7,"column":19},"generated":{"line":1,"column":153}},{"source":"app/scripts/pointer-events.js","original":{"line":7,"column":19},"generated":{"line":1,"column":163}},{"source":"app/scripts/pointer-events.js","original":{"line":8,"column":20},"generated":{"line":1,"column":165}},{"source":"app/scripts/pointer-events.js","original":{"line":8,"column":20},"generated":{"line":1,"column":176}},{"source":"app/scripts/pointer-events.js","original":{"line":9,"column":23},"generated":{"line":1,"column":180}},{"source":"app/scripts/pointer-events.js","original":{"line":9,"column":23},"generated":{"line":1,"column":194}},{"source":"app/scripts/pointer-events.js","name":"addEventListener","original":{"line":12,"column":11},"generated":{"line":1,"column":197}},{"source":"app/scripts/pointer-events.js","name":"addEventListener","original":{"line":12,"column":11},"generated":{"line":1,"column":199}},{"source":"app/scripts/pointer-events.js","original":{"line":12,"column":28},"generated":{"line":1,"column":216}},{"source":"app/scripts/pointer-events.js","original":{"line":12,"column":43},"generated":{"line":1,"column":230}},{"source":"app/scripts/pointer-events.js","name":"event","original":{"line":12,"column":44},"generated":{"line":1,"column":239}},{"source":"app/scripts/pointer-events.js","name":"setPointerCapture","original":{"line":14,"column":15},"generated":{"line":1,"column":242}},{"source":"app/scripts/pointer-events.js","name":"setPointerCapture","original":{"line":14,"column":15},"generated":{"line":1,"column":244}},{"source":"app/scripts/pointer-events.js","name":"event","original":{"line":14,"column":33},"generated":{"line":1,"column":262}},{"source":"app/scripts/pointer-events.js","name":"pointerId","original":{"line":14,"column":39},"generated":{"line":1,"column":264}},{"source":"app/scripts/pointer-events.js","original":{"line":16,"column":25},"generated":{"line":1,"column":275}},{"source":"app/scripts/pointer-events.js","original":{"line":16,"column":25},"generated":{"line":1,"column":277}},{"source":"app/scripts/pointer-events.js","name":"event","original":{"line":17,"column":20},"generated":{"line":1,"column":278}},{"source":"app/scripts/pointer-events.js","name":"event","original":{"line":17,"column":20},"generated":{"line":1,"column":285}},{"source":"app/scripts/pointer-events.js","name":"x","original":{"line":17,"column":26},"generated":{"line":1,"column":287}},{"source":"app/scripts/pointer-events.js","name":"event","original":{"line":18,"column":19},"generated":{"line":1,"column":289}},{"source":"app/scripts/pointer-events.js","name":"event","original":{"line":18,"column":19},"generated":{"line":1,"column":295}},{"source":"app/scripts/pointer-events.js","name":"x","original":{"line":18,"column":25},"generated":{"line":1,"column":297}},{"source":"app/scripts/pointer-events.js","name":"Date","original":{"line":19,"column":20},"generated":{"line":1,"column":299}},{"source":"app/scripts/pointer-events.js","name":"Date","original":{"line":19,"column":20},"generated":{"line":1,"column":306}},{"source":"app/scripts/pointer-events.js","name":"now","original":{"line":19,"column":25},"generated":{"line":1,"column":311}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":20,"column":19},"generated":{"line":1,"column":317}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":20,"column":19},"generated":{"line":1,"column":323}},{"source":"app/scripts/pointer-events.js","name":"scale","original":{"line":20,"column":29},"generated":{"line":1,"column":325}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":21,"column":23},"generated":{"line":1,"column":331}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":21,"column":23},"generated":{"line":1,"column":341}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":21,"column":33},"generated":{"line":1,"column":343}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":22,"column":24},"generated":{"line":1,"column":353}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":22,"column":24},"generated":{"line":1,"column":364}},{"source":"app/scripts/pointer-events.js","name":"brightness","original":{"line":22,"column":34},"generated":{"line":1,"column":366}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":23,"column":27},"generated":{"line":1,"column":377}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":23,"column":27},"generated":{"line":1,"column":391}},{"source":"app/scripts/pointer-events.js","name":"startPosition","original":{"line":23,"column":37},"generated":{"line":1,"column":393}},{"source":"app/scripts/pointer-events.js","name":"addEventListener","original":{"line":27,"column":11},"generated":{"line":1,"column":410}},{"source":"app/scripts/pointer-events.js","name":"addEventListener","original":{"line":27,"column":11},"generated":{"line":1,"column":412}},{"source":"app/scripts/pointer-events.js","original":{"line":27,"column":28},"generated":{"line":1,"column":429}},{"source":"app/scripts/pointer-events.js","original":{"line":27,"column":43},"generated":{"line":1,"column":443}},{"source":"app/scripts/pointer-events.js","name":"event","original":{"line":27,"column":44},"generated":{"line":1,"column":452}},{"source":"app/scripts/pointer-events.js","original":{"line":28,"column":12},"generated":{"line":1,"column":455}},{"source":"app/scripts/pointer-events.js","name":"currentGesture","original":{"line":28,"column":13},"generated":{"line":1,"column":458}},{"source":"app/scripts/pointer-events.js","original":{"line":28,"column":12},"generated":{"line":1,"column":460}},{"source":"app/scripts/pointer-events.js","name":"currentGesture","original":{"line":32,"column":85},"generated":{"line":1,"column":461}},{"source":"app/scripts/pointer-events.js","name":"currentGesture","original":{"line":32,"column":85},"generated":{"line":1,"column":465}},{"source":"app/scripts/pointer-events.js","name":"currentGesture","original":{"line":32,"column":85},"generated":{"line":1,"column":467}},{"source":"app/scripts/pointer-events.js","name":"startX","original":{"line":32,"column":15},"generated":{"line":1,"column":469}},{"source":"app/scripts/pointer-events.js","name":"startX","original":{"line":32,"column":15},"generated":{"line":1,"column":471}},{"source":"app/scripts/pointer-events.js","name":"startX","original":{"line":32,"column":15},"generated":{"line":1,"column":473}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":32,"column":45},"generated":{"line":1,"column":480}},{"source":"app/scripts/pointer-events.js","name":"prevX","original":{"line":32,"column":23},"generated":{"line":1,"column":483}},{"source":"app/scripts/pointer-events.js","name":"prevX","original":{"line":32,"column":23},"generated":{"line":1,"column":485}},{"source":"app/scripts/pointer-events.js","name":"prevTs","original":{"line":32,"column":30},"generated":{"line":1,"column":491}},{"source":"app/scripts/pointer-events.js","name":"prevTs","original":{"line":32,"column":30},"generated":{"line":1,"column":493}},{"source":"app/scripts/pointer-events.js","name":"scale","original":{"line":32,"column":38},"generated":{"line":1,"column":500}},{"source":"app/scripts/pointer-events.js","name":"scale","original":{"line":32,"column":38},"generated":{"line":1,"column":502}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":32,"column":45},"generated":{"line":1,"column":508}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":32,"column":45},"generated":{"line":1,"column":510}},{"source":"app/scripts/pointer-events.js","name":"x","original":{"line":33,"column":15},"generated":{"line":1,"column":521}},{"source":"app/scripts/pointer-events.js","name":"brightness","original":{"line":32,"column":56},"generated":{"line":1,"column":524}},{"source":"app/scripts/pointer-events.js","name":"brightness","original":{"line":32,"column":56},"generated":{"line":1,"column":526}},{"source":"app/scripts/pointer-events.js","name":"startPosition","original":{"line":32,"column":68},"generated":{"line":1,"column":537}},{"source":"app/scripts/pointer-events.js","name":"startPosition","original":{"line":32,"column":68},"generated":{"line":1,"column":539}},{"source":"app/scripts/pointer-events.js","name":"event","original":{"line":33,"column":20},"generated":{"line":1,"column":553}},{"source":"app/scripts/pointer-events.js","name":"x","original":{"line":33,"column":15},"generated":{"line":1,"column":555}},{"source":"app/scripts/pointer-events.js","name":"dx","original":{"line":34,"column":14},"generated":{"line":1,"column":558}},{"source":"app/scripts/pointer-events.js","name":"x","original":{"line":34,"column":19},"generated":{"line":1,"column":560}},{"source":"app/scripts/pointer-events.js","name":"startX","original":{"line":34,"column":23},"generated":{"line":1,"column":562}},{"source":"app/scripts/pointer-events.js","name":"style","original":{"line":36,"column":15},"generated":{"line":1,"column":564}},{"source":"app/scripts/pointer-events.js","name":"style","original":{"line":36,"column":15},"generated":{"line":1,"column":566}},{"source":"app/scripts/pointer-events.js","name":"transform","original":{"line":36,"column":21},"generated":{"line":1,"column":572}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":36,"column":46},"generated":{"line":1,"column":582}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":36,"column":46},"generated":{"line":1,"column":596}},{"source":"app/scripts/pointer-events.js","name":"dx","original":{"line":36,"column":58},"generated":{"line":1,"column":598}},{"source":"app/scripts/pointer-events.js","original":{"line":36,"column":8},"generated":{"line":1,"column":601}},{"source":"app/scripts/pointer-events.js","name":"prevX","original":{"line":48,"column":23},"generated":{"line":1,"column":607}},{"source":"app/scripts/pointer-events.js","name":"prevX","original":{"line":48,"column":23},"generated":{"line":1,"column":609}},{"source":"app/scripts/pointer-events.js","name":"x","original":{"line":48,"column":31},"generated":{"line":1,"column":615}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":50,"column":18},"generated":{"line":1,"column":617}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":50,"column":18},"generated":{"line":1,"column":619}},{"source":"app/scripts/pointer-events.js","name":"dx","original":{"line":50,"column":30},"generated":{"line":1,"column":629}},{"source":"app/scripts/pointer-events.js","original":{"line":50,"column":36},"generated":{"line":1,"column":632}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":50,"column":42},"generated":{"line":1,"column":636}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":50,"column":52},"generated":{"line":1,"column":638}},{"source":"app/scripts/pointer-events.js","original":{"line":50,"column":65},"generated":{"line":1,"column":649}},{"source":"app/scripts/pointer-events.js","name":"nodeState","original":{"line":50,"column":69},"generated":{"line":1,"column":651}},{"source":"app/scripts/pointer-events.js","name":"translate","original":{"line":50,"column":79},"generated":{"line":1,"column":653}},{"source":"app/scripts/pointer-events.js","original":{"line":50,"column":91},"generated":{"line":1,"column":663}}],"sources":{"app/scripts/pointer-events.js":"export default () => {\n    let camera = document.getElementById('camera');\n    let currentGesture = null;\n\n    const nodeState = {\n        scale: 1,\n        translate: 0,\n        brightness: 100,\n        startPosition: 0,\n    };\n\n    camera.addEventListener('pointerdown', (event) => {\n        // Нужно для десктопа чтобы поймать pointerup вне DOM-ноды\n        camera.setPointerCapture(event.pointerId);\n\n        currentGesture = {\n            startX: event.x,\n            prevX: event.x,\n            prevTs: Date.now(),\n            scale: nodeState.scale,\n            translate: nodeState.translate,\n            brightness: nodeState.brightness,\n            startPosition: nodeState.startPosition,\n        };\n    });\n\n    camera.addEventListener('pointermove', (event) => {\n        if (!currentGesture) {\n            return\n        }\n\n        const {startX, prevX, prevTs, scale, translate, brightness, startPosition} = currentGesture;\n        const {x} = event;\n        const dx = x - startX;\n\n        camera.style.transform = `translate(${translate + dx}px)`;\n\n        // const ts = Date.now();\n        // const speed = Math.abs(x - prevX) / (ts - prevTs);\n\n        // if (speed > 5 && ts !== prevTs) {\n        //     // container.className = `${container.className} notification-container_moved`;\n        //     camera.className = `${camera.className} notification-container__camera_moved-${dx > 0 ? 'right' : 'left'}`;\n        //     currentGesture = null;\n        //     return;\n        // }\n\n        currentGesture.prevX = x;\n        // currentGesture.prevTs = ts;\n        nodeState.translate = dx < -1.5 * nodeState.translate ? -2 * nodeState.translate : 0;\n    });\n\n}\n"},"lineCount":null}},"hash":"a0fa027f76cf839a8d3f02d724e1335e","cacheData":{"env":{}}}